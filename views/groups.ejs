<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <body>
    <%- include("./partials/nav.ejs") %>

    <main class="container groups-page">

      <div class="groups-header">
  <h1>Moje grupe</h1>
  <a href="/newgroup" class="btn-new-group">
    <span>+</span> Napravi novu grupu
  </a>
</div>

      <div class="groups-container">
        <!-- Leva kolona: grupe -->
        <div class="groups-left">
          <% if(groups && groups.length > 0) { %>
            <% groups.forEach(group => { %>
              <div class="group-card">
                <h2><%= group.name %></h2>
                <p><%= group.description %></p>
                <div class="stats">
                  <span>üë• <%= group.members.length %> ƒçlanova</span>
                  <span>üéØ <%= group.goals.length %> ciljeva</span>
                </div>
                <a href="/groups/<%= group.id %>" class="btn-view">Pogledaj grupu</a>
              </div>
            <% }) %>
          <% } else { %>
            <p class="groups-empty">Trenutno nisi ƒçlan nijedne grupe.</p>
          <% } %>
        </div>

        <!-- Desna kolona: sidebar -->
        <div class="groups-sidebar">
          <h2>Pozivnice</h2>

          <% if(invites && invites.length > 0) { %>
            <% invites.forEach(invite => { %>
              <div class="invite-item">
                Pozvao te <strong><%= invite.inviter_name %></strong> u grupu 
                <strong><%= invite.group_name %></strong>

                <div class="invite-actions">
                  <form action="/groups/<%= invite.group_id %>/accept" method="POST" class="d-inline">
                    <input type="hidden" name="invite_id" value="<%= invite.invite_id %>">
                    <button type="submit" class="btn btn-success btn-sm">Prihvati</button>
                  </form>

                  <form action="/groups/<%= invite.group_id %>/decline" method="POST" class="d-inline">
                    <input type="hidden" name="invite_id" value="<%= invite.invite_id %>">
                    <button type="submit" class="btn btn-danger btn-sm">Odbij</button>
                  </form>
                </div>
              </div>
            <% }) %>
          <% } else { %>
            <p class="groups-empty">Nema novih pozivnica.</p>
          <% } %>
        </div>
      </div>
    </main>

    <%- include("./partials/footer.ejs") %>
  </body>
</html>
