<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <body>
    <%- include("./partials/nav.ejs") %>

    <div class="container py-5">
      <h1 class="mb-4 text-white">Dostignuća</h1>

      <% if (achievements && achievements.length > 0) { %>
        <div class="achievements-grid">
          <% achievements.forEach(ach => { %>
            <div class="achievement-card text-center p-3">
              
              <div class="achievement-icon mb-2 <%= ach.types %>">
                <% if(ach.types === 'bronza'){ %>
                  <i class="fas fa-medal fa-3x"></i>
                <% } else if(ach.types === 'srebro'){ %>
                  <i class="fas fa-award fa-3x"></i>
                <% } else if(ach.types === 'zlato'){ %>
                  <i class="fas fa-trophy fa-3x"></i>
                <% } else if(ach.types === 'dijamant'){ %>
                  <i class="fas fa-gem fa-3x"></i>
                <% } else { %>
                  <i class="fas fa-medal fa-3x"></i>
                <% } %>
              </div>

              <div class="progress mb-2">
                <div class="progress-bar" role="progressbar" data-progress="<%= Math.min((ach.current / ach.target) * 100, 100) %>"></div>
              </div>

              <h5 class="achievement-name mb-1"><%= ach.name %></h5>
              <p class="achievement-desc mb-0"><%= ach.description %></p>
              <span class="achievement-progress"><%= ach.current + '/' + ach.target %></span>
              <span class="achievement-type mt-2 badge <%= ach.types %>"><%= (ach.types || 'bronze').toUpperCase() %></span>
            </div>
          <% }) %>
        </div>
      <% } else { %>
        <div class="groups-empty mt-4">
          Još uvek nema dostignuća. Nastavi dalje!
        </div>
      <% } %>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const bars = document.querySelectorAll(".progress-bar");
        bars.forEach(bar => {
          const progress = bar.getAttribute("data-progress");
          setTimeout(() => {
            bar.style.width = progress + "%";
          }, 100);
        });
      });
    </script>

    <%- include("./partials/footer.ejs") %>
  </body>
</html>
